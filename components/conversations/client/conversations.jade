template(name='conversations')
    .ui.container.basic.segment
        // #create_conversation.ui.basic.button
        //     i.plus.icon
        //     | Start Conversation
        .ui.two.cards
            each conversations
                +conversation


template(name='conversation')
    .ui.container
        .ui.fluid.card
            .content
                // .header
                //     |Conversation Topics:
                if can_edit
                    .ui.form
                        +tags
                else
                    each tags
                        .ui.basic.label #{this}
                .ui.segment
                    .ui.dividing.header Participants: &nbsp;
                    .ui.horizontal.list
                        each participants
                            .item 
                                img.ui.avatar.image(src="{{c.url profile.image_id width=100 height=100 gravity='face' crop='fill'}}")
                                |#{name}
                                +color_dots
                .description
                    .ui.segment
                        .ui.threaded.comments
                            each conversation_messages
                                +comment
                        if in_conversation
                            .ui.small.left.icon.fluid.input
                                i.plus.icon
                                input.add_message(type='text' placeholder='Add Message')
            if currentUser
                .extra.content
                    if can_edit
                        .ui.basic.button.close_conversation
                            i.red.remove.icon
                            |Close
                    if in_conversation
                        .ui.basic.button.leave_conversation
                            i.red.minus.icon
                            |Leave
                    else
                        .ui.basic.button.join_conversation
                            i.green.plus.icon
                            |Join
    
