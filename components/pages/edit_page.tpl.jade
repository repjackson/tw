with page
    .ui.container.basic.segment
        .ui.form
            .field
                label Name
                .ui.input
                    input#name(type='text' value=name)
            // .ui.header Custom Image
            if image_id
                .field
                    label Image
                    .ui.large.image
                        img(src="{{c.url image_id width=800 crop='fit'}}")
                        a#remove_photo.ui.top.left.attached.link.basic.label Remove
                        .ui.bottom.right.attached.basic.label Image Id: #{image_id}
            else
                .fields
                    .field
                        label Upload Image
                        input(type='file' name='upload_picture' accept='image/*')
                    if isInRole 'admin'
                        .field
                            label or Choose Cloudinary Image Id
                            input#input_image_id(type='text')
        
            .field
                label Description
                .froala-container
                    +froalaReactive getFEContext
            if isInRole 'admin'
                .ui.basic.segment
                    #upload_widget_opener.ui.basic.button 
                        i.upload.icon
                        |Upload Images for Description
                    | Copy addresses into the 'Insert Image' button dialogue above
                    if image_array.length
                        .ui.list
                            each image_array
                                .item
                                    .ui.tiny.image
                                        img(src=thumbnail_url)
                                    .middle.aligned.content
                                        // .ui.header #{original_filename}
                                        | #{url}
            script(src='//widget.cloudinary.com/global/all.js', type='text/javascript')
            // script(type='text/javascript').
            //     document.getElementById("upload_widget_opener").addEventListener("click", function() {
            //     cloudinary.openUploadWidget({ cloud_name: 'facet', upload_preset: 'rodonu5a'},
            //     function(error, result) { console.log(error, result) });
            //     }, false);            
            #save_page.ui.green.huge.button Save
            #delete.ui.red.icon.button
                i.trash.icon