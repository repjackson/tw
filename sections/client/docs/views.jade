template(name='response')
    with response
        .ui.blue.segment
            .ui.header
                |Your Response
                +published_label
            if editing_mode
                .content
                    .ui.form
                        .field
                            textarea#text(rows='3') #{text}
                .content
                    .save_doc.ui.basic.big.circular.icon.button
                        i.big.green.check.icon
                    +published
                    +delete_button
            else
                .content
                    .large130 #{text}
                .content
                    if is_author
                        .edit_this.ui.basic.large.circular.icon.button
                            i.blue.pencil.icon


// template(name='answer')
//     .ui.fluid.card
//         unless editing
//             if content
//                 .content 
//                     .large130 !{content}
//                     // .large-text !{content}
//             if body
//                 .content 
//                     .large130 #{text}
//             .content
//                 .ui.horizontal.list
//                     if isInRole 'admin'
//                         .item
//                             +published_label
//                     // .item
//                     //     +view_full_button
//                     .item
//                         +author_info
//                     .item
//                         small #{when}
//                     .item
//                         +mark_read
//                     // .item
//                     //     #reply.ui.basic.circular.icon.button(tooltip='Reply')
//                     //         +icon48 name='response' classes='ui mini inline image'
//                     .item
//                         if readers
//                             | Seen by:
//                         each readers
//                             .ui.tiny.basic.label #{name}
//                         // img.ui.avatar.image(src="{{c.url profile.image_id width=50 height=50 gravity='face' crop='fill'}}")

// template(name='q_a')
//     .ui.stackable.grid
//         .ui.four.wide.column
//             .ui.dividing.header Sessions
//             .ui.list
//                 each sessions
//                     .item
//                         .header
//                             +author_info
//                             |#{when}
//         .ui.ten.wide.column
//             .ui.dividing.header Questions
//             each questions
//                 .ui.fluid.card
//                     .content
//                         .header #{title}
//                         if is_admin
//                             +published_label
        

template(name='sessions')
    if currentUser
        +dividing_header icon='time' label='Your Sessions'
        .ui.four.stackable.cards
            each my_sessions
                +session_card
    else
        .ui.header Log in to take quiz and track results.


template(name='list')
    .ui.cards
        each children
            +list_item


template(name='list_item')
    .ui.fluid.card
        unless editing
            if title
                .content
                    .header 
                        if completed
                            +icon48 name='checkmark' classes='ui inline image'
                        if icon_class
                            +icon48 name=icon_class classes='ui inline image'
                        if number
                            |#{number}: 
                        |#{title}
                        if end_date
                            |by #{end_date}
                    if slug
                        .meta Slug: #{slug}
            if tags
                .content
                    +view_tags
            .content
                if child_count
                    .ui.basic.label(data-tooltip="#{child_count} Responses")
                        +icon48 name='flow-chart' classes='ui tiny inline image'
                        |#{child_count}
                if is_admin
                    +published_label
                    +edit_parent_id
                if doc.can_vote
                    +voting
                +view_full_button
                +author_info
                |#{when}
                if is_author
                    if doc.can_add
                        +session_edit_button
        if editing
            .content
                each child_view_fields
                    +Template.dynamic template=this data=doc
            .content
                +published
                +session_edit_button




template(name='cards')
    .ui.cards
        each children
            +child_view

template(name='child_view')
    .ui.fluid.card
        unless editing
            if title
                .content
                    .header 
                        if completed
                            +icon48 name='checkmark' classes='ui inline image'
                        if icon_class
                            +icon48 name=icon_class classes='ui inline image'
                        if number
                            |#{number}: 
                        |#{title}
                        if end_date
                            |by #{end_date}
                    if slug
                        .meta Slug: #{slug}
            if youtube
                +youtube
            if image_id
                .image
                    img(src="{{c.url image_id}}")
            if image_url
                .ui.large.image
                    img(src=image_url)
            if content
                .content 
                    .large130 !{content}
                    // .large-text !{content}
                    if author_name
                        h4.ui.header
                            |- #{author_name}
            if link
                .content
                    a(href=link target='_blank') #{link}
            if text
                .content #{text}
            if tags
                .content
                    +view_tags
            // if intention_tags
            //     .content
            //         +intention_tags
            // if location_tags
            //     .content
            //         +location_tags
            .content
                if child_count
                    .ui.basic.label(data-tooltip="#{child_count} Responses")
                        +icon48 name='flow-chart' classes='ui tiny inline image'
                        |#{child_count}
                if is_admin
                    +published_label
                    +edit_parent_id
                if doc.can_vote
                    +voting
                +view_full_button
                +author_info
                |#{when}
                if is_author
                    if doc.can_add
                        +session_edit_button
        if editing
            .content
                each child_view_fields
                    +Template.dynamic template=this data=doc
            .content
                +published
                +session_edit_button
