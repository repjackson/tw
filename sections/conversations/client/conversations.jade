template(name='conversations')
    .ui.horizontal.divider.header 
        i.comments.outline.icon
        |Conversations
    .ui.grid
        .four.wide.column
            if currentUser
                #create_conversation.ui.basic.button
                    i.plus.icon
                    |Create Conversation
            +conversation_cloud
        .twelve.wide.column
            .ui.cards
                each conversations
                    +conversation


template(name='conversation')
    .ui.fluid.card
        .content
            // .header
            //     |Conversation Topics:
            if published
                if can_edit
                    .ui.form
                        +tags
                else
                    each tags
                        .ui.basic.label #{this}
            .ui.center.aligned.basic.segment
                .ui.horizontal.list
                    each participants
                        .item
                            img.ui.avatar.image(src="{{c.url profile.image_id width=100 height=100 gravity='face' crop='fill'}}")
                            |#{name}
            .ui.divider
            .description
                .ui.threaded.comments
                    each conversation_messages
                        +comment
                if in_conversation
                    .ui.divider
                    .ui.large.left.icon.fluid.transparent.input
                        i.green.plus.icon
                        input.add_message(type='text' placeholder='Add Message')
        if currentUser
            if published
                .extra.content
                    if can_edit
                        .ui.basic.button.close_conversation
                            i.red.remove.icon
                            |Close
                    if in_conversation
                        .ui.basic.button.leave_conversation
                            i.red.minus.icon
                            |Leave
                    else
                        .ui.basic.button.join_conversation
                            i.green.plus.icon
                            |Join

