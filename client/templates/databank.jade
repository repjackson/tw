template(name='view_databank')
    .ui.stackable.padded.grid
        .centered.row
            .three.wide.center.aligned.column
                if currentUser
                    +add_doc_button type=child_type
            .ten.wide.center.aligned.column
                h1.ui.header 
                    +icon96 name=icon_class classes='ui image'
                    |#{title}
            .three.wide.center.aligned.column
                if can_edit
                    +edit_button
        .row
            .four.wide.center.aligned.column
                if currentUser
                    +toggle_view_mode_button
                    .ui.hidden.divider
                each doc.child_fields
                    +Template.dynamic template=facet_template data=doc
                +username_facet
                .ui.hidden.divider
            .twelve.wide.column
                .ui.cards
                    each children 
                        +databank_card

template(name='edit_databank')
    .ui.stackable.padded.grid
        .centered.row
            h1.ui.header 
                +icon96 name=icon_class classes='ui image'
                |Edit #{title}
        .row
            .twelve.wide.column
                +edit_title
                +edit_icon
                // +edit_child_type
                +edit_child_fields
            .four.wide.column
                +save_link
                +edit_type
                +edit_number
                +published

template(name='databank_card')
    .ui.fluid.card
        // each parent.child_fields
        //     .ui.label #{this}
        .content
            each parent.child_fields
                +Template.dynamic template=field_view_template data=..
            
        .content
            +author_info
            |#{when}
        .content
            +voting
            +bookmark_button
            +resonate_button
            +respond_button
            .right.floated
                +view_full_button
        if child_count
            .content
                +response_list
        if favorite_count
            .content
                strong
                    +icon48 name='heart-health' classes='ui mini inline image'
                    | Resonates with #{favorite_count} 
                .ui.divided.horizontal.list
                    each favoriter_list
                        .item
                            img.ui.avatar.image(src="{{c.url profile.image_id width=100 height=100 gravity='face' crop='fill'}}")
                            .content
                                .header
                                    |#{name}
        // if upvoters
        //     .content
        //         strong
        //             +icon48 name='thumbs-up' classes='ui mini inline image'
        //             | Upvoted by
        //         .ui.divided.horizontal.list
        //             each upvoter_list
        //                 .item
        //                     img.ui.avatar.image(src="{{c.url profile.image_id width=100 height=100 gravity='face' crop='fill'}}")
        //                     .content
        //                         .header
        //                             |#{name}
                

template(name='edit_databank_item')
    .ui.stackable.padded.grid
        .centered.row
            h1.ui.center.aligned.header Edit #{parent.title} Item
        .row
            .twelve.wide.column
                .ui.form
                    each parent.child_fields
                        +Template.dynamic template=field_edit_template data=doc
            .four.wide.column
                +save_button
                +delete_button
                +published

template(name='view_databank_item')
    .ui.stackable.padded.grid
        .centered.row
            h1.ui.center.aligned.header View #{parent.title} Item
        .row
            .twelve.wide.column
                .ui.form
                    each parent.child_fields
                        +Template.dynamic template=field_view_template data=doc
                    if is_visible
                        +response_list
            .four.wide.column
                +author_info
                h3.ui.sub.header #{when}
                if can_edit
                    +edit_button
                if watson
                    +doc_sentiment
                    +doc_emotion
                    +watson_keywords
                else 
                    if can_edit
                        +call_watson
                .ui.dividing.header Actions
                +bookmark_button
                // +reflect_button
                unless is_author
                    +resonate_button
                    +thanks_button
                +resonates_list
                +mark_read
                // +read_by
