template(name='lightbank')
    h1.ui.center.aligned.header
        +icon96 name='summer'
        |Lightbank
    // .ui.center.aligned.basic.segment
    //     +doc_content tags='lightbank,blurb'

    .ui.stackable.grid
        .five.wide.column
            +theme_facet
            if isInRole 'admin'
                if selected_theme_tags
                    #add.ui.blue.large.button
                        +icon24 name='plus' classes='ui mini spaced image'
                        |Add with Selected Tags
                else
                    #add_lightbank_doc.ui.basic.large.fluid.button
                        +icon48 name='plus' classes='ui mini spaced image'
                        |Add Lightbank Item
        
        .eight.wide.column
            .ui.centered.stackable.cards
                each docs
                    +lightbank_doc_view
        .three.wide.column
            if isInRole 'dev'
                .ui.header 
                    +icon24 name='filter' classes='ui avatar image'
                    |Type Filters
                +passage_filter
                +journal_prompt_filter
                +poem_filter
                +quote_filter
                .ui.header 
                    +icon24 name='filter' classes='ui avatar image'
                    |Component Filters
                div
                    +image_filter
            .ui.header 
                +icon24 name='filter' classes='ui avatar image'
                |Status Filters
            div
                +bookmark_filter
            div
                +read_filter
            div
                +complete_filter
            div
                +doc_limit
            if isInRole 'admin'
                .ui.header Admin
                +published_filter
        


template(name='lightbank_doc_view')
    if is_poem
        +small_poem_view
    if is_quote
        +small_quote_view
    if is_custom    
        .ui.fluid.card(class=read_segment_class)
            .content
                if has_youtube
                    +view_youtube
                if has_image
                    if image_id
                        .image
                            img(src="{{c.url image_id}}")
                    if image_url
                        .ui.large.image
                            img(src=image_url)
                // .content
                //     span.right.floated 
                //         .expand_card.ui.basic.icon.button
                //             i.expand.icon
                if has_content
                    .light_bank_content(class=light_bank_content_class)
                        |!{content}
            // .content
            //     .meta
            //         img.ui.avatar.image(src="https://png.icons8.com/tags/color/48" width="48" height="48")
            //         each tags
            //             .ui.tiny.circular.button.tag(class=tag_class) #{this}
            .content
                // .ui.hidden.divider
                // if can_resonate
                +resonate_button
                +reflect_button
                if can_complete
                    +mark_complete_button
                // if can_bookmark
                +bookmark_button
                // +view_full_button
                +mark_read
                if can_edit
                    +edit_link_button
            // if isInRole 'admin'
            //     .content
            //         +change_lightbank_type
                    
                    
                    
template(name='small_poem_view')                    
    .ui.fluid.card(class=read_segment_class)
        .content
            .ui.top.right.attached.basic.label(data-tooltip='Poem')
                +icon48 name='rose'
            if has_youtube
                +view_youtube
            if has_image
                if image_id
                    .image
                        img(src="{{c.url image_id}}")
                if image_url
                    .ui.large.image
                        img(src=image_url)
            // .content
            //     span.right.floated 
            //         .expand_card.ui.basic.icon.button
            //             i.expand.icon
            if has_content
                .light_bank_content(class=light_bank_content_class)
                    |!{content}
        // .content
        //     .meta
        //         +icon48 name='tags'
        //         each tags
        //             .ui.tiny.circular.button.tag(class=tag_class) #{this}
        .content
            +resonate_button
            +reflect_button
            +bookmark_button
            +view_full_button
            +mark_read
            if can_edit
                +edit_link_button
                
template(name='small_quote_view')                    
    .ui.fluid.card(class=read_segment_class)
        .content
            .ui.top.right.attached.basic.label(data-tooltip='Quote')
                +icon48 name='get-quote'
            if has_image
                if image_id
                    .image
                        img(src="{{c.url image_id}}")
                if image_url
                    .ui.large.image
                        img(src=image_url)
            // .content
            //     span.right.floated 
            //         .expand_card.ui.basic.icon.button
            //             i.expand.icon
            .light_bank_content(class=light_bank_content_class)
                |!{content}
            h4.ui.header
                |- #{author_name}
        // .content
        //     .meta
        //         +icon48 name='tags'
        //         each tags
        //             .ui.tiny.circular.button.tag(class=tag_class) #{this}
        .content
            +resonate_button
            +reflect_button
            +bookmark_button
            +view_full_button
            +mark_read
            if can_edit
                +edit_link_button
                
                                    