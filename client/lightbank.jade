template(name='lightbank')
    .ui.stackable.padded.grid
        .centered.row
            h1.ui.header 
                +icon96 name='sun' classes='ui image'
                |Lightbank
        .row
            .four.wide.column
                #add_item.ui.compact.basic.fluid.button
                    i.green.plus.icon
                    |Add Item
                +tag_facet
                // +location_facet
                // +timestamp_facet
                // +username_facet
                .ui.hidden.divider
            .twelve.wide.column
                .ui.cards
                    each items
                        +lightbank_card


template(name='lightbank_card')
    .ui.fluid.card
        if youtube
            +view_youtube
        if image_id
            +view_image_id
        if image_url
            +view_image_url
        if content
            +view_content
            if author_name
                h4.ui.header
                    |- #{author_name}
        .content
            +view_tags
        .content
            +voting
            +bookmark_button
            +resonate_button
            // +reflect_button
        if favorite_count
            .content
                strong
                    +icon48 name='heart' classes='ui mini inline image'
                    | Resonates with #{favorite_count} 
                .ui.divided.horizontal.list
                    each favoriter_list
                        .item
                            img.ui.avatar.image(src="{{c.url profile.image_id width=100 height=100 gravity='face' crop='fill'}}")
                            .content
                                .header
                                    |#{name}
        // if upvoters
        //     .content
        //         strong
        //             +icon48 name='thumbs-up' classes='ui mini inline image'
        //             | Upvoted by
        //         .ui.divided.horizontal.list
        //             each upvoter_list
        //                 .item
        //                     img.ui.avatar.image(src="{{c.url profile.image_id width=100 height=100 gravity='face' crop='fill'}}")
        //                     .content
        //                         .header
        //                             |#{name}
        .content
            +author_info
            |#{when}
            a.ui.basic.icon.button(href="/lightbank/#{_id}")
                i.right.arrow.icon
                
template(name='view_lightbank_item')
    with lightbank_item
        .ui.stackable.padded.grid
            .row
                .three.wide.column
                    a.ui.top.left.attached.basic.button(href="/lightbank")
                        i.arrow.left.icon
                        |Lightbank
                .twelve.wide.center.aligned.column
                    h1.ui.header View Lightbank Item
            .row
                .ten.wide.column
                    if image_id
                        +view_image_id
                        // img.ui.centered.image(src="{{c.url image_id height=500 width=800 background='white' crop='lpad'}}")
                    if image_url
                        +view_image_url
                        // img.ui.centered.image(src=image_url)
                    +view_content
                    each tags
                        .ui.basic.label #{this}
                .five.wide.column
                    +author_info
                    if is_author
                        a.ui.button(href="/lightbank/#{_id}/edit") edit

template(name='edit_lightbank_item')
    with lightbank_item
        .ui.stackable.padded.grid
            .centered.row
                h1.ui.center.aligned.header Edit Lightbank Item
            .row
                .twelve.wide.column
                    .ui.form
                        +edit_tags
                        +edit_image_id
                        +edit_image_url
                        +edit_content
                .four.wide.column
                    a.ui.button(href="/lightbank/#{_id}") save 
                    #delete_item.ui.red.icon.button
                        i.trash.icon
