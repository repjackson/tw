template(name='transactions')
    .ui.container
        .ui.horizontal.divider.header
            i.exchange.icon
            | #{currentUser.username} Transactions
        .ui.header Your current point amount: #{currentUser.points}
        table.ui.selectable.unstackable.table
                thead
                    tr
                        th Title
                        th Sale Price
                        th When
                        th Buyer
                        th Seller
                        th Actions
                tbody
                    each transactions
                        +transaction

template(name='transaction')                    
    tr
        td 
            if parent.image_id
                img.ui.avatar.image(src="{{c.url parent.image_id}}")
            if parent.image_url
                img.ui.avatar.image(src=parent.image_url)
            a.ui.header(href="/view/#{parent._id}") 
                |#{parent.title}
            each parent.tags
                .ui.small.basic.label #{this}
        td 
            if sale_dollar_price
                |$#{sale_dollar_price}
            |#{sale_point_price} point(s)
        td
            |#{when}
        td
            img.ui.avatar.image(src="{{c.url author.profile.image_id width=100 height=100 gravity='face' crop='fill'}}")
            |#{author.name}
        td
            img.ui.avatar.image(src="{{c.url recipient.author.profile.image_id width=100 height=100 gravity='face' crop='fill'}}")
            |#{recipient.author.name}
        td 
            a.ui.basic.button(href="/view/#{_id}")
                | View Full
                i.right.arrow.icon
